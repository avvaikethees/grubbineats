<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Grubbin' Eats</title>

    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/client-order.css" type="text/css" />

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>
  </head>

  <body>
    <!-- nav bar  -->
    <%- include('partials/_nav') %>
    <h2>Place your order here: </h2>

    <h2> Your Total </h2>
    <p id="total-price">$0.00</p>


    <!-- button to order -->
    <form method = "POST" action = "/">
    <button type = "submit"> Send Order </button>
    </form>

    <% for (let obj in menu_data) { %>
    <div id = "menu">
      <div class = "menu-row">

        <div class = "menu-image">
          <img src = <%= menu_data[obj]['url_photo'] %> >
        </div>

        <div class = "menu-item">
          <h3> <%= menu_data[obj]['item_name']%> </h3>
           <p><%= menu_data[obj]['description'] %> </p>
        </div>

        <div class = "item-price">
        $<%= menu_data[obj]['price_cents']/100 %>
        </div>

        <div class = "quantity-input">
          <input class="dish-counter" id= "<%= menu_data[obj]['price_cents']/100 %>" type="number" min="0" max ="50" value="0">
        </div>

      </div>
    </div>

    <% } %>


    <script type = "text/javascript">
      $(document).ready(function() {
        $('.dish-counter').change(function(){
          let total = 0;

          $('.dish-counter').each(function () {
            let quantityOutput = parseFloat($(this).val())
            let price = parseFloat($(this).attr("id"))
            total += quantityOutput * price
           })
          let totalString = `$${total.toFixed(2)}`
          $('#total-price').html(totalString)
        })
      })
    </script>



  </body>
</html>
